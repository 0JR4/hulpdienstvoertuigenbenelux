<!DOCTYPE html>
<html lang="nl" style="overflow: hidden;"> 
    
<head>
    <meta name="theme-color" content="#131313">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overzichten</title>
    <link rel="icon" href="./img/logos/LogoGradient.png">
    <link rel="stylesheet" href="stylee.css">
    <script defer type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script defer src="scripts/loader.js"></script>
    <script defer src="scripts/list.js"></script>
    <script defer src="scripts/scrollbar.js"></script>

    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-bold-rounded/css/uicons-bold-rounded.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-bold-straight/css/uicons-bold-straight.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-solid-rounded/css/uicons-solid-rounded.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C6XN7YM9YV"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-C6XN7YM9YV');
    </script>
</head>


<body>
    <section id="showbox-holder">
        <div id="showbox">
            <div id="loader-container">
                <div class="loader">
                    <svg class="circular" viewBox="25 25 50 50">
                        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                    </svg>
                </div>
            </div>
        </div>
    </section>

    <section id="navbar">
        <div id="navbar-region">
            <a href="../list.html?NL" class="clickable">NL</a>
            <a>/</a>
            <a href="../list.html?BE" class="clickable">BE</a>
            <a>/</a>
            <a href="../list.html?LUX" class="clickable">LUX</a>
        </div>
            
        <div id="navbar-group">
            <a href="index.html">
                <div id="navbar-button">Home</div>
            </a>
            <a href="contact.html">
                <div id="navbar-button">Contact</div>
            </a>
            <a href="over-ons.html">
                <div id="navbar-button">Over Ons</div>
            </a>
        </div>
    </section>

    <div class="scroll-container">
        <div class="scroll-content">

            <section id="header">
                <a id="header-logo" href="index.html">
                    <img src="img/logos/Union.png" alt="Logo">
                </a>
                <div id="header-text">
                    <h1>HulpdienstVoertuigen</h1>
                    <h2>De beste hulpdienstvoertuigen informatie in de BeNeLux</h2>
                </div>
            </section>

            <section id="list-buttons">
                <input id="search-input" type="text" autocomplete="off" placeholder="Zoek een adres">
                <div id="dropdown-holder">
                    <div class="dropdown">
                        <button id="hulpdienst-dropdown" class="dropdown-button">Alle Hulpdiensten<i class="fa fa-chevron-down"></i></button>
                        <div class="dropdown-wrapper">
                            <ul class="dropdown-menu">
                            </ul>
                            <div class="custom-scrollbar">
                                <div class="scrollbar-thumb"></div>
                            </div>
                        </div>
                    </div>

                    <div class="dropdown">
                        <button id="regio-dropdown" class="dropdown-button">Alle Regio's<i class="fa fa-chevron-down"></i></button>
                        <div class="dropdown-wrapper">
                            <ul class="dropdown-menu">
                            </ul>
                            <div class="custom-scrollbar">
                                <div class="scrollbar-thumb"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="containers-holder">

            </section>
        </div>
    </div>

    <div class="custom-scrollbar-body">
        <div class="scrollbar-thumb"></div>
    </div>
</body>


<script>
    const SINGLE_OPEN_MODE = false; 
    const MIN_INFO_BOX_HEIGHT = 78;

    function updateInfoGroupHeight() {
        document.querySelectorAll('.info-group').forEach(infoGroup => {
            const infoBox = infoGroup.querySelector('.info-box');
            if (infoBox) {
                let infoBoxHeight = infoBox.offsetHeight;
                if (window.innerWidth < 350) {
                    infoBox.style.minHeight = `${MIN_INFO_BOX_HEIGHT}px`;
                    infoBoxHeight = Math.max(infoBoxHeight, MIN_INFO_BOX_HEIGHT); 
                } else {
                    infoBox.style.minHeight = '';
                }
                const newHeight = infoBoxHeight + 4; 
                infoGroup.style.height = `${newHeight}px`;
            }
        });
    }

    window.addEventListener('resize', () => {
        updateInfoGroupHeight(); 
    });

    function toggleDetails(button) {
        const infoGroup = button.closest('.info-group');
        const details = infoGroup.querySelector('.toggle-section');
        const toggleBtn = infoGroup.querySelector('.toggle-btn');

        const infoBox = infoGroup.querySelector('.info-box');
        let infoBoxHeight = infoBox ? infoBox.offsetHeight : 0;

        if (window.innerWidth < 350) {
            infoBoxHeight = Math.max(infoBoxHeight, MIN_INFO_BOX_HEIGHT); 
        }

        let collapsedHeight = infoBoxHeight + 4; 

        if (SINGLE_OPEN_MODE) {
            document.querySelectorAll('.info-group').forEach((group) => {
                if (group !== infoGroup && !group.querySelector('.toggle-section').classList.contains('hidden')) {
                    const otherDetails = group.querySelector('.toggle-section');
                    const otherToggleBtn = group.querySelector('.toggle-btn');
                    otherDetails.classList.add('hidden');
                    otherToggleBtn.classList.remove('active');
                    group.style.height = `${collapsedHeight}px`; 
                    requestAnimationFrame(() => {
                        group.style.transition = 'height 0.3s ease-out, padding 0.3s ease-out, border 0.3s ease-out';
                        group.style.height = `${collapsedHeight}px`; 
                        group.style.padding = '0';
                        group.style.border = '2px solid transparent';
                    });

                    group.addEventListener('transitionend', () => {
                        group.style.transition = '';
                    }, { once: true });
                }
            });
        }

        const isHidden = details.classList.toggle('hidden');
        toggleBtn.classList.toggle('active', !isHidden);

        if (isHidden) {
            const currentHeight = infoGroup.offsetHeight; 
            infoGroup.style.height = `${currentHeight}px`; 
            requestAnimationFrame(() => {
                infoGroup.style.transition = 'height 0.3s ease-out, padding 0.3s ease-out, border 0.3s ease-out';
                infoGroup.style.height = `${collapsedHeight}px`; 
                infoGroup.style.padding = '0';
                infoGroup.style.border = '2px solid transparent';
            });
            infoGroup.addEventListener('transitionend', () => {
                infoGroup.style.transition = ''; 
                collapsedHeight = infoBox.offsetHeight + 4; 
                infoGroup.style.height = `${collapsedHeight}px`; 
            }, { once: true });
        } else {
            infoGroup.style.height = 'auto'; 
            const expandedHeight = infoGroup.scrollHeight; 
            infoGroup.style.height = `${collapsedHeight}px`; 
            requestAnimationFrame(() => {
                infoGroup.style.transition = 'height 0.3s ease-in, padding 0.3s ease-in, border 0.3s ease-in';
                infoGroup.style.height = `${expandedHeight}px`;
                requestAnimationFrame(() => {
                    infoGroup.style.padding = '10px';
                    infoGroup.style.border = '2px solid #2d7df6';
                });
            });
            infoGroup.addEventListener('transitionend', () => {
                infoGroup.style.height = 'auto';
                infoGroup.style.transition = '';
            }, { once: true });
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        const dropdownButtons = document.querySelectorAll('.dropdown-button');
        const dropdownMenus = document.querySelectorAll('.dropdown-wrapper');

        function closeAllDropdowns() {
            dropdownMenus.forEach(menu => {
                menu.classList.remove('active');
                document.removeEventListener('touchmove', preventBodyScroll, { passive: false });
            });
            dropdownButtons.forEach(button => {
                button.classList.remove('active');
            });
        }

        function preventBodyScroll(e) {
            const activeDropdown = document.querySelector('.dropdown-wrapper.active');
            if (activeDropdown) {
                const isInsideDropdown = activeDropdown.contains(e.target);

                if (!isInsideDropdown) {
                    e.preventDefault();
                    e.stopPropagation();
                }
            }
        }

        dropdownButtons.forEach(button => {
            button.addEventListener('click', function (e) {
                e.stopPropagation();
                const menu = this.nextElementSibling;
                if (menu.classList.contains('active')) {
                    menu.classList.remove('active');
                    this.classList.remove('active');
                    document.removeEventListener('touchmove', preventBodyScroll, { passive: false });
                } else {
                    closeAllDropdowns();
                    menu.classList.add('active');
                    this.classList.add('active');
                    document.addEventListener('touchmove', preventBodyScroll, { passive: false });
                }
            });
        });

        document.addEventListener('click', function (e) {
            if (!e.target.closest('.dropdown')) {
                closeAllDropdowns();
            }
        });

        dropdownMenus.forEach(menu => {
            menu.addEventListener('click', function (e) {
                if (e.target.tagName === 'LI') {
                    const button = this.previousElementSibling;
                    button.innerHTML = `${e.target.textContent} <i class="fa fa-chevron-down"></i>`;
                    closeAllDropdowns();
                }
            });
        });

        initializeScrollbars();
    });

    function initializeScrollbars() {
        document.querySelectorAll('.dropdown-wrapper').forEach(dropdownWrapper => {
            const dropdownMenu = dropdownWrapper.querySelector('.dropdown-menu');
            const scrollbarThumb = dropdownWrapper.querySelector('.scrollbar-thumb');
            const customScrollbar = dropdownWrapper.querySelector('.custom-scrollbar');
            let isDragging = false;

            function updateScrollbarThumb() {
                const menuHeight = dropdownMenu.clientHeight;
                const menuScrollHeight = dropdownMenu.scrollHeight;
                const thumbHeight = (menuHeight / menuScrollHeight) * menuHeight;
                const minThumbHeight = 20;
                scrollbarThumb.style.height = `${Math.max(thumbHeight, minThumbHeight)}px`;
            }

            dropdownMenu.addEventListener("scroll", () => {
                const scrollTop = dropdownMenu.scrollTop;
                const maxScrollTop = dropdownMenu.scrollHeight - dropdownMenu.clientHeight;
                const thumbPosition = (scrollTop / maxScrollTop) * (customScrollbar.clientHeight - scrollbarThumb.clientHeight);
                scrollbarThumb.style.top = `${thumbPosition}px`;
            });

            scrollbarThumb.addEventListener("mousedown", (e) => {
                isDragging = true;
                document.body.style.userSelect = "none";
                document.body.style.pointerEvents = "none";
                scrollbarThumb.style.pointerEvents = "none";
                const initialY = e.clientY;
                const initialThumbPosition = parseFloat(scrollbarThumb.style.top || 0);

                function drag(e) {
                    if (!isDragging) return;
                    const deltaY = e.clientY - initialY;
                    const newThumbPosition = initialThumbPosition + deltaY;
                    const maxThumbPosition = customScrollbar.clientHeight - scrollbarThumb.clientHeight;
                    const clampedPosition = Math.min(Math.max(newThumbPosition, 0), maxThumbPosition);
                    scrollbarThumb.style.top = `${clampedPosition}px`;
                    const scrollTop = (clampedPosition / maxThumbPosition) * (dropdownMenu.scrollHeight - dropdownMenu.clientHeight);
                    dropdownMenu.scrollTop = scrollTop;
                }

                function stopDrag() {
                    isDragging = false;
                    document.body.style.userSelect = "";
                    scrollbarThumb.style.pointerEvents = "";
                    document.body.style.pointerEvents = "";
                    document.removeEventListener("mousemove", drag);
                    document.removeEventListener("mouseup", stopDrag);
                }

                document.addEventListener("mousemove", drag);
                document.addEventListener("mouseup", stopDrag);
            });

            updateScrollbarThumb();

            new MutationObserver(updateScrollbarThumb).observe(dropdownMenu, {
                childList: true,
                subtree: true,
            });
        });
    }

    function updAndClear() {
        count = 50;
        debouncedUpdateList(true);
    }
</script>
